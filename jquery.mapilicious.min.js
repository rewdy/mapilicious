/*
 * Mapilicious - jQuery plugin to add links to maps to <address> tags.
 * Version: 0.5 (03/22/2013)
 * Copyright (c) 2013 Andrew Meyer
 * Licensed under the MIT License: http://en.wikipedia.org/wiki/MIT_License
 * Requires: jQuery v1.4+
*/
(function(jQuery){jQuery.fn.mapilicious=function(opt){var options=jQuery.extend({},jQuery.fn.mapilicious.defaults,opt);var els={};if(this.length>0){els=this}else{els=jQuery(options.range)}return els.each(function(){el=jQuery(this);address=el.html();address=address.replace(/\<br[/]?\>/gi,' ').replace(/<[^>]+>/ig,'').replace(/^\s+|\s+$/g,'');mapUrl=options.mapUrl+encodeURIComponent(address);link='<a href="'+mapUrl+'" '+options.linkAttr+'>'+options.linkText+'</a>';if(options.linkTemplate!==false||options.linkTemplate!=''){linkMu=options.linkTemplate.replace('{link}',link)}else{linkMu=link}switch(options.placement){case"append":el.append(linkMu);break;case"prepend":el.prepend(linkMu);break;case"after":el.after(linkMu);break;case"before":el.before(linkMu);break;default:el.append(linkMu)}})};jQuery.fn.mapilicious.defaults={range:'address',placement:'append',mapUrl:'https://maps.google.com/maps?q=',linkText:'Map',linkTemplate:'<div class="mapilicious_map_link">{link}</div>',linkAttr:''}})(jQuery);